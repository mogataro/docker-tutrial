<!DOCTYPE html>
<html>

<body>

  <h1>Dockerを理解する</h1>

  <p>この記事はUdemyの<a href="https://www.udemy.com/course/docker-k/" target="_blank">「ゼロからはじめる
      Dockerによるアプリケーション実行環境構築」</a>受講時の個人的なメモ書きです。</p>

  <h2>Dockerとは何か</h2>
  <ul>
    <li>コンテナ型仮装環境を作成、実行、管理するためのプラットフォーム</li>
    <li>Dockerのソフトウェアを使って素早くコンテナ起動し、様々なアプリケーションを実行することができる</li>
    <li>異なる環境(PCやサーバ)で簡単に同じ仮装環境を再現できる</li>
    <li>DockerのソフトウェアはGo言語で書かれている</li>
  </ul>

  <h2>Dockerのユースケース</h2>
  <ul>
    <li>アプリケーション開発環境</li>
    <li>検証環境、本番環境</li>
    <li>WEBサーバ、DBサーバなどの構築</li>
    <li>各種プログラミング言語の実行環境</li>
    <li>様々なミドルウェアの環境構築</li>
  </ul>

  <h2>Dockerを使うメリット</h2>
  <ul>
    <li>プログラムの実行環境を素早く用意できる</li>
    <li>再現性のある環境を用意できる。</li>
    <li>設定ファイルを共有することで開発メンバー間で同じ環境を立ち上げることができる</li>
    <li>PCに必要なソフトなどを入れなくて良いので、PCの環境を汚さずに済む</li>
  </ul>

  <h2>ホスト型仮想化とコンテナ型仮想化の違い</h2>
  <h3>ホスト型仮想化</h3>
  <p>>仮想マシン上にゲストOSを動作させる。<br />
    ホストOS上にVM（仮想マシン）を動作させるために、ハイパーバイザーが間に入って動作している。<br />
    ホスト型仮想化は物理サーバーにOSをインストールしたものに近い環境を作れる代わりに、仮想マシンを作るためのイメージサイズが大きい。<br />
    イメージサイズが大きいため、VMの作成やイメージの移動には時間がかかる。<br />
    また、通常のOSと同様に起動に時間がかかる。
  </p>
  <h3>コンテナ型仮想化</h3>
  <p>Dokerコンテナの作成、起動、停止、削除などDockerの操作はDockerEngineを介して実行される。<br />
    Dockerの利用者はdockerコマンドを使ってDockerEngineに指示を出す。<br />
    DockerEngineはDockerDesktopなどのDockerクライアントソフトウェアをインストールすると利用できる。<br />
    DockerEngineは常駐型のプログラムのため、Dockerを使用する際に起動しておく必要がある。<br />
    <strong>コンテナにはゲストOSは無く</strong>、ホストOSのコアであるカーネルを使用して実行されるため、軽量に動作する。<br />
  </p>

  <h2>ホスト型仮想化とコンテナ型仮想化を比較して見るメリット・デメリット</h2>

  <h3>仮想化のオーバーヘッド</h3>
  <dl>
    <dt>ホスト型仮想化</dt>
    <dd>CPUやメモリの使用率などリソースの面でオーバーヘッドが多く、起動や停止に時間がかかる。</dd>
    <dt>コンテナ型仮想化</dt>
    <dd>コンテナはアプリケーション実行に必要なものだけを含み、ホストOSのカーネルを使用するため、動作が速くリソースの使用率も少ない。</dd>
  </dl>

  <h3>アプリケーション実行の再現性</h3>
  <dl>
    <dt>ホスト型仮想化</dt>
    <dd>仮想マシンの環境の違いによりアプリケーションが動作しなくなることが稀にある。</dd>
    <dt>コンテナ型仮想化</dt>
    <dd>特定のアプリケーションを動作させるために必要なものは、Dockerイメージにまとまっており、同じDockerイメージからコンテナを起動する限り、環境が変わっても同様に動作する。</dd>
  </dl>

  <h3>OSの自由度</h3>
  <dl>
    <dt>ホスト型仮想化</dt>
    <dd>仮想マシン上で任意のOSを動作できる。</dd>
    <dt>コンテナ型仮想化</dt>
    <dd>コンテナはホストOSのカーネルを使用して動作するので、Windows上で直接Linuxコンテナを動作できない。逆も同様。</dd>
  </dl>

  <h3>分離レベル</h3>
  <dl>
    <dt>ホスト型仮想化</dt>
    <dd>ハードウェアレベルで仮想化されており、ホストOSや仮想マシン間の分離レベルが高く、それぞれ影響を受けづらい。</dd>
    <dt>コンテナ型仮想化</dt>
    <dd>OSの機能を使用した仮想化は、ホスト型仮想化に比べて分離レベルは低い。</dd>
  </dl>

</body>

</html>